# GpxSplits

This is Python package/command line tool for for getting split times from GPX files. It also creates some visualisations of the split times.

## Installation

To install this library you will need to use the command line. Open the command line within the folder you wish to save the library to.

Clone a copy of this repository to your local computer using git. For more info see *[the git simple guide](https://rogerdudler.github.io/git-guide/*).

`git clone https://github.com/BorehamN/GpxSplits`

Once the library has been downloaded install the requirements using the command

`pip install -r requirements.txt`

Then we can install the library using the command

`python setup.py install`

You can check the library has been installed by running

`gpxsplits --help`

This will show some brief help information.

## Getting Split times

Split times are generated by running the command line tool in the form:

`gpxsplits COURSE_FILE GPX_FILE`

The rest of this section will explain this in more detail.

To generate split times we need two files:
1. A course file
2. A GPX file

The later sections of this document explain these file formats in more detail but for now we can use the ones supplied in the library's data directory.

Open the command line in the data directory. We can generate splits for the `Lipno_Classic_1.gpx` by running the following in the command line:

`gpxsplits mySplits Lipno_splits.json Lipno_Classic_1.gpx`

This will produce 4 files in this directory:
- `mySplits_splits.csv` - Splits times in seconds
- `mySplits_splits.html` - A plot of the split times
- `mySplits_normalised_splits.csv` - The normalised split times as +/- from the average time.
- `mySplits_splits.html` - A plot of the normalised split times as +/- from the average time.

To compare GPX files multiple gpx files can be specified at the end of the command:

`gpxsplits mySplits Lipno_splits.json Lipno_Classic_1.gpx Lipno_Classic_2.gpx`

Alternatively the unix wild card characters can be used to select multiple files. For instance the following command selects all GPX files in a directory:

`gpxsplits mySplits Lipno_splits.json *.gpx`

## The Course File

## GPX to CSV

In addition to the `gpxsplits` command, the library also features a tool to convert a GPX file to a CSV format so that it can be easily analyzed using external tools. This can is run in the command line in a similar fashion:

`gpxtocsv Lipno_Classic_1.gpx`

This will create a new file in the same directory `Lipno_Classic_1.csv` with the columns:
- lat
- lon
- elev
- epoch
- temp
- hr

Again mulitple files or unix wildcard characters can be used to convert multiple files at once/

`gpxtocsv *.gpx`

## How to Download a GPX file from Strava 

## Improvements

- A tool to create the course file
- Remove shapely dependancy
- Calculate gate intecept in cartesian East-North rather than current geographic coords.
- Additional data visualisations
